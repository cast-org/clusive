{% extends "shared/base.html" %}
{% load static figuration %}

{% block bodyClass %}library{% endblock %}

{% block title %}Add from Bookshare{% endblock %}

{% block header %}
{% include "shared/partial/site_header.html" %}
{% endblock %}

{% block content %}
<main id="content" tabindex="-1">
    <h1>Add from Bookshare</h1>
    <div class="row">
        <div class="col-md-9 col-lg-6">
            <div class="box">
                <h2>Step 3: Review and edit</h2>
                <form method="post">
                    <div class="form-group">
                        {% csrf_token %}
                        <p>Bookshare download:</p>
                        <ul>
                            <li>Title: {{ title.title }}</li>
                            {% for author in title.clusive.authors %}
                            <li>Author: {{ author }}</li>
                            {% empty %}
                            <li>No author</li>
                            {% endfor %}
                            <li>ISBN: {{ title.isbn13 }}</li>
                            <li><img src="{{ title.clusive.thumbnail }}" alt="Cover of {{ title.title }}"</img></li>
                            {% if title.clusive.more %}
                            <li id="short_{{ title.bookshareId }}">
                                Description: {{ title.clusive.synopsis }} &hellip;
                                <button onclick="clusive.moreOrLess({{ title.bookshareId }}, 'more', event)" class="btn btn-primary">More</button>
                            </li>
                            <li id="long_{{ title.bookshareId }}" style="display: none">
                                Description: {{ title.synopsis }}
                                <button onclick="clusive.moreOrLess({{ title.bookshareId }}, 'less', event)" class="btn btn-primary">Less</button>
                            </li>
                            {% else %}
                            <li id="long_{{ title.bookshareId }}" style="display: none">
                               Description: {{ title.synopsis }}
                            </li>
                            {% endif %}
                        </ul>
                    </div>
                    
                    <div class="form-group">
                        <input type="submit" class="btn btn-secondary btn-small" value="Import" disabled/>
                        <a href="/library/bookshare-results/{{ previous }}" class="btn btn-link btn-small">Cancel</a>
                    </div>
                </form>
            </div>
        </div>
    </div>
    <script type="text/javascript">
        clusive.moreOrLess = function (id, action) {
            if (action === "more") {
                elementToShow = document.getElementById(`long_${id}`);
                elementToHide = document.getElementById(`short_${id}`);
                elementToHide.style.display = 'none';
                elementToShow.style.display = 'block';
            }
            else if (action === "less") {
                elementToHide = document.getElementById(`long_${id}`);
                elementToShow = document.getElementById(`short_${id}`);
                elementToHide.style.display = 'none';
                elementToShow.style.display = 'block';
            }
            event.stopPropagation();
            event.preventDefault();
        }
    </script>

</main>
{% endblock %}

