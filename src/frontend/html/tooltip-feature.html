<!DOCTYPE html>
<html lang="en-us">
<head>
<!-- Required meta tags -->
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">

<title>Tooltips - Clusive Mockup</title>

<!-- Fonts -->
<link href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:400,700&display=swap" rel="stylesheet">
<link href="./font/fontello/fontello.css" rel="stylesheet">

<!-- Figuration CSS -->
<link href="../dist/css/clusive.css" rel="stylesheet">

<!-- jQuery and Figuration JS -->
<script src="https://code.jquery.com/jquery-3.6.0.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js" integrity="sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/figuration@4.3.2/dist/js/figuration.min.js" integrity="sha384-M7NVkRh47bmlJp6HztCNlK2xV/BDbxPcKA8WA3/IlfGkzUaMbo8lXWHnSuBxx4TV" crossorigin="anonymous"></script>
<!--<script src="../dist/js/frontend.js"></script>-->
<script src="../js/frontend.js"></script>
<script src="./js/theme-test.js"></script>

</head>
<body>

<a class="skiplink sr-only-focusable" href="#content">Skip to main content</a>

<header class="site-header is-sticky">
    <div class="site-header-navbar navbar navbar-expand-md">
        <div class="site-header-container container-xl">
            <div class="site-header-logo">
                <a href="#" class="icon-logo-clusive-link">
                    <span class="icon-logo-clusive-toggle" aria-hidden="true"></span>
                    <span class="icon-logo-clusive" aria-hidden="true"></span>
                    <span class="sr-only">Clusive</span>
                </a>
            </div>
            <button class="navbar-toggle btn btn-primary btn-small" type="button" data-cfw="collapse" data-cfw-collapse-target="#siteNav">
                <span class="not-open">
                    <span class="icon-menu" aria-hidden="true"></span>
                    <span class="sr-only">Open</span>
                </span>
                <span class="is-open">
                    <span class="icon-cancel" aria-hidden="true"></span>
                    <span class="sr-only">Close</span>
                </span>
                Menu
            </button>

            <nav id="siteNav" class="site-header-nav navbar-collapse collapse" aria-label="Main">
                <ul class="navbar-nav">
                    <li class="nav-item">
                        <a href="#" class="nav-link">Library</a>
                    </li>
                    <li class="nav-item">
                        <a href="#" class="nav-link">Manage</a>
                    </li>
                    <li class="nav-item">
                        <a href="#" class="nav-link">Word bank</a>
                    </li>
                    <li class="nav-item">
                        <a href="#" class="nav-link" data-cfw="dropdown">Username <span class="caret" aria-hidden="true"></span></a>
                        <ul class="dropdown-menu dropreverse">
                            <li><a href="#">Change password</a></li>
                            <li><a href="#">Log out</a></li>
                        </ul>
                    </li>
                </ul>
            </nav>
        </div>
    </div>
</header>

<div class="content-container container-xl">

    <div class="sidebars-wrapper sidebars-bg sidebars-top is-fixed">
        <div class="sidebars">
            <div class="sidebar sidebar-start">
            </div>

            <div class="sidebar sidebar-end">
                <div class="sidebar-region sidebar-tool" role="region" aria-label="User preferences">
                    <button type="button" class="btn btn-setting" aria-label="Settings" data-cfw="modal" data-cfw-modal-target="#modalSettings">
                        <span class="icon-settings" aria-hidden="true"></span>
                    </button>
                </div>
                <div class="sidebar-region sidebar-tts" role="region" aria-label="Read aloud controls">
                    <div class="tts-inactive">
                        <button type="button" class="btn btn-tool tts-play" aria-label="Read aloud" title="Read aloud">
                            <span class="icon-play" aria-hidden="true"></span>
                        </button>
                    </div>
                    <div class="tts-active">
                        <button type="button" class="btn btn-tts tts-pause" aria-label="Pause read aloud" title="Pause read aloud">
                            <span class="icon-pause" aria-hidden="true"></span>
                        </button>
                        <button type="button" class="btn btn-tts tts-resume" aria-label="Resume read aloud" title="Resume read aloud">
                            <span class="icon-play" aria-hidden="true"></span>
                        </button>
                        <button type="button" class="btn btn-tts tts-stop" aria-label="Stop read aloud" title="Stop read aloud">
                            <span class="icon-stop" aria-hidden="true"></span>
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="content">
        <main id="content" tabindex="-1">
            <section>
                <h1>Lorem ipsum dolor sit amet</h1>

                <p><b>Note:</b> Fade animation on tooltip affects screen readers (NVDA), keeping them from reading the entire tooltip.</p>

                <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Vestibulum vel velit vitae enim maximus sollicitudin a quis enim. Curabitur sit amet ante odio. In eleifend lacinia ipsum, eu eleifend diam tempor et. Nullam iaculis lobortis sollicitudin. Maecenas interdum libero sit amet quam cursus, et dapibus enim facilisis. Donec non leo dapibus, elementum velit non, laoreet nisl. Sed in lacinia tortor. Suspendisse eget accumsan erat. Phasellus vel est eu ligula hendrerit condimentum sed quis nulla. Nam dignissim dolor in ipsum dapibus sagittis.</p>
                <p>Aliquam auctor, felis at egestas pellentesque, leo nibh facilisis nulla, ut egestas erat metus id justo. Vivamus egestas dolor sapien, a rhoncus tellus porta ut. Sed ac accumsan velit. Nunc aliquam id urna vel dignissim. Donec consequat augue sapien, a volutpat tellus tincidunt vel. Praesent consequat lacinia scelerisque. Praesent euismod et justo et cursus. Cras nulla quam, feugiat id porta nec, tincidunt eget quam.</p>
                <p>Nam varius justo ac malesuada sollicitudin. Donec quis metus nec velit interdum rhoncus in non nulla. In sollicitudin nibh ac lectus malesuada, a facilisis enim volutpat. Quisque felis odio, lacinia eu nisi at, fringilla tempor nulla. Nulla sollicitudin lacus vel velit sollicitudin, in ornare augue consectetur. Sed accumsan neque ac nisi porta, non aliquam odio porttitor. Aenean vel mollis metus, id pulvinar tellus. Nullam sodales egestas arcu lacinia pretium. Sed at orci iaculis, sagittis eros in, pharetra libero. In quis nulla lobortis urna mollis pretium. Praesent vehicula, massa sit amet semper cursus, purus tellus ullamcorper sem, et lobortis turpis purus nec nisi. Aenean purus neque, malesuada et ipsum a, suscipit bibendum erat. Vestibulum suscipit rutrum elit quis dictum. Nunc facilisis felis velit, eu mollis mauris volutpat et.</p>
                <p>Suspendisse pulvinar est maximus lacus faucibus gravida. Nunc sit amet condimentum est, in vulputate ipsum. Suspendisse ac dui vel risus pulvinar volutpat eu ut metus. Pellentesque at congue augue, non tincidunt orci. Aliquam ut est vitae justo auctor posuere non at metus. Ut malesuada dui vel enim ultrices, nec tristique nisl gravida. Morbi at lacus elit. Donec interdum lorem at neque aliquam, sit amet ornare augue faucibus. Morbi imperdiet pellentesque ligula tincidunt cursus. Fusce lacus ex, vestibulum ac erat vitae, ullamcorper dignissim arcu. Lorem ipsum dolor sit amet, consectetur adipiscing elit.</p>
                <p>Nam faucibus tristique odio, a lobortis ipsum faucibus eleifend. Etiam pretium diam sed turpis faucibus commodo. Integer cursus, felis placerat cursus aliquam, sapien nisl euismod ex, vestibulum pulvinar nibh lectus vitae dui. Sed volutpat tincidunt felis non venenatis. Nulla et vulputate augue, sed egestas lacus. Nunc pellentesque magna eget eleifend volutpat. Vestibulum porttitor diam at erat ultrices vestibulum. Etiam ultricies erat in ante iaculis sagittis. Morbi dignissim aliquet iaculis. Cras aliquam fermentum lobortis. Curabitur non massa felis. Nullam maximus justo at eros efficitur pulvinar. Morbi fermentum dui quis mi condimentum sollicitudin. Curabitur vel varius elit. Duis ornare tortor suscipit imperdiet aliquam. Phasellus sit amet ornare dolor.</p>
            </section>
            </main>
        </div>
    </div>

</div>

<!--<div class="text-end">
    <span id="feature-settings" style="display: inline-block;" role="region">
        <button id="btnSettings" type="button" class="btn btn-setting" aria-label="Settings" data-cfw="modal" data-cfw-modal-target="#modalSettings">
            <span class="icon-settings" aria-hidden="true"></span>
        </button>
    </span>
</div>-->

<div id="modalSettings" class="modal setting-modal">
    <div class="modal-dialog modal-dialog-side-end modal-dialog-scrollable modal-sm">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title h5">
                    <span class="setting-brand">
                        <span class="icon-settings" aria-hidden="true"></span>
                    </span>
                    Settings
                </h2>
                <button type="button" class="close" data-cfw-dismiss="modal" aria-label="Close">
                    <span class="icon-cancel" aria-hidden="true"></span>
                </button>
            </div>
            <div class="modal-body">
            </div>
        </div>
    </div>
</div>

<div id="tooltip_0" class="tooltip tooltip-feature">
    <div class="tooltip-body">
        <p><strong>Settings:</strong> Something about settings here.</p>

        <div class="tooltip-action">
            <button type="button" class="btn btn-primary" data-cfw-dismiss="tooltip">Got it!</button>
        </div>
    </div>
    <div class="tooltip-arrow"></div>
</div>

<div id="tooltip_1" class="tooltip tooltip-feature">
    <div class="tooltip-body">
        <p><strong>Why am i seeing this:</strong> Something about why here.</p>

        <div class="tooltip-action">
            <button type="button" class="btn btn-primary" data-cfw-dismiss="tooltip">Got it!</button>
        </div>
    </div>
    <div class="tooltip-arrow"></div>
</div>

<div id="tooltip_2" class="tooltip tooltip-feature">
    <div class="tooltip-body">
        <div data-cfw="accordion">
            <div id="contextFeature0" class="collapse">
                <p>Select some text to access the context menu. (Click and drag, or double-click a word.)</p>
                <div class="tooltip-action">
                    <div class="tooltip-step">1/2</div>
                    <button type="button" class="btn btn-primary" data-cfw="collapse" data-cfw-collapse-target="#contextFeature1" data-cfw-collapse-animate="false">Next</button>
                </div>
            </div>
            <div id="contextFeature1" class="collapse">
                <ul class="list feature-list">
                    <li><span class="feature-icon icon-edit" aria-hidden="true"></span> Highlight the passage</li>
                    <li><span class="feature-icon icon-book" aria-hidden="true"></span> Look up a definition</li>
                    <li><span class="feature-icon icon-play-circled2" aria-hidden="true"></span> Hear the words read aloud</li>
                </ul>
                <div class="tooltip-action">
                    <div class="tooltip-step">2/2</div>
                    <button type="button" class="btn btn-primary" data-cfw-dismiss="tooltip">Got it!</button>
                </div>
                <span class="d-none open" data-cfw="collapse" data-cfw-collapse-target="#contextFeature0" data-cfw-collapse-animate="false">Previous</span>
            </div>
        </div>
    </div>
    <!-- <div class="tooltip-arrow"></div> -->
</div>

<script>
/*
Mostly working prototype with screen-reader announcement.

Questions:
- How to integrate w/ Django?
- Create tooltip w/ JS as needed?
- Dispose when hidden?

Notes:
- Fade animation might intefere with screen-readers (NVDA-yes, JAWS-?) - force it off.
- Unlink/dispose through tooltip options are broken/missing in Figuration v4.0.2 currently.
- Might need `aria-atomic=true` on tooltips at creation/insert.

*/

function showSampleTooltip(name) {
    'use strict';

    if (name) {
        $(window).ready(function() {
            var tip_control = $('[data-clusive-tip-id="' + name + '"]');
            var tip_popover = $(tip_control.attr('data-cfw-tooltip-target'));
            var tip_placement = tip_control.attr('data-cfw-tooltip-placement');
            tip_control.CFW_Tooltip({
                container: '#features',
                viewport: '#features',
                trigger: 'manual',
                placement: tip_placement ? tip_placement : 'right auto',
                popperConfig: {
                    positionFixed: true
                }
            });
            setTimeout(function() {
                tip_popover.attr({
                    'role': 'status',
                    'aria-live': 'assertive',
                    'aria-atomic': 'true'
                });
                tip_control.CFW_Tooltip('show');
                tip_popover.trigger('focus');
            }, 2000);
            tip_control.one('afterHide.cfw.tooltip', function() {
                $(this).CFW_Tooltip('dispose');
                if ($(this).hasClass('feature-novis'))  {
                    $('#content').trigger('focus');
                }
            });
        });
    }
}


$(window).ready(function() {
    showSampleTooltip('settings');
    //showSampleTooltip('why');
    showSampleTooltip('context');
});

$(document.body).one('themeControls', function() {
    var html = '</br>';
    html += 'Sub-theme: ';
    html += '<a href="#" style="color: #009 !important;" onclick="$(document.body).toggleClass(\'library\'); return false;">Toggle library</a>';
    html += '</br>';
    $('#themeTest').append(html);
});
</script>

<div id="features" class="features" aria-live="assertive" aria-atomic="false">
    <div class="content-container container-xl">
        <div class="content">
            <span data-clusive-tip-id="context" data-cfw-tooltip-target="#tooltip_2" data-cfw-tooltip-placement="right auto" class="feature-context feature-novis"></span>
        </div>
    </div>
</div>

</body>
</html>